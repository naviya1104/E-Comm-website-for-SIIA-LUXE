<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title> E-COMMERCE WEBSITE BY EDYODA | CREATED BY PRIYANKA SHARMA </title>
        <!-- favicon -->
        <link
            rel="icon"
            href="https://yt3.ggpht.com/a/AGF-l78km1YyNXmF0r3-0CycCA0HLA_i6zYn_8NZEg=s900-c-k-c0xffffffff-no-rj-mo"
            type="image/gif"
            sizes="16x16"
        />
        <!-- header links -->
        <script src="https://kit.fontawesome.com/4a3b1f73a2.js"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Lato&display=swap"
            rel="stylesheet"
        />
        <!-- slider links -->
        <!-- <script src="http://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> -->
        <script src="js/jQuery3.4.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css"
        />
        <link rel="stylesheet" href="css/ourStory.css" />
        <link rel="stylesheet" href="css/content.css" />
    </head>

    <body>
        <!-- HEADER -->
        <div id="1"></div>
        <script>
            load("header.html");
            function load(url) {
                req = new XMLHttpRequest();
                req.open("GET", url, false);
                req.send(null);
                document.getElementById(1).innerHTML = req.responseText;
            }
        </script>
        <!-- SLIDER -->
        <div id="2"></div>
        <script>
            function load(url, callback) {
                req = new XMLHttpRequest();
                req.open("GET", url, false);
                req.send(null);
                document.getElementById(2).innerHTML = req.responseText;
                if (callback)
                    callback();
            }
            load("slider.html", function () {
                $("#containerSlider").slick({
                    dots: true,
                    infinite: true,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    autoplay: true,
                    autoplaySpeed: 2000,
                });
            });
        </script>

        <!-- OUR STORY SECTION -->
        <div id="ourStory">
            <section>
                <h2>Our Story</h2>
                <p id="ourStoryText">Loading...</p>
            </section>
        </div>

        <!-- CONTENT SECTION -->
        <div id="3"></div>
        <script>
            async function loadContent() {
                try {
                    const res = await fetch("content.html");
                    const html = await res.text();
                    document.getElementById("3").innerHTML = html;

                    // Execute the script inside content.html
                    const script = document.createElement("script");
                    script.src = "content.js";
                    document.body.appendChild(script);
                } catch (error) {
                    console.error("Failed to load content.html:", error);
                }
            }
            loadContent();

            async function loadOurStory() {
                try {
                    const res = await fetch("http://localhost:3001/api/content");
                    const data = await res.json();
                    document.getElementById("ourStoryText").textContent =
                        data.ourStory || "";
                } catch (error) {
                    document.getElementById("ourStoryText").textContent =
                        "Failed to load content.";
                    console.error("Error loading Our Story:", error);
                }
            }

            loadOurStory();
        </script>

        <!-- FOOTER -->
        <div id="4"></div>
        <script>
            load("footer.html");
            function load(url) {
                req = new XMLHttpRequest();
                req.open("GET", url, false);
                req.send(null);
                document.getElementById(4).innerHTML = req.responseText;
            }
        </script>
    </body>

    <!-- slider JS START -->
    <!-- Removed duplicate slick-carousel script to avoid conflicts -->
    <!-- content JS -->
    <script src="content.js"></script>
</html>
